/*! ATVicon.js, v1.0.4 - Author: Nash Vail (nashvail.me) - https://github.com/nashvail/ATVIcons @preserve */
!function(){"use strict";function t(t,i){var e=null;return function(){var n=this,s=arguments;null===e&&(e=setTimeout(function(){t.apply(n,s),e=null},i))}}function i(t,i){return-2/i*t+1}function e(t,i){return-2/i*t+1}function n(t){return Math.ceil(1e4*t)/1e4}function s(i,e){if(!(i&&i instanceof Element))return!1;this.el=i,this.children=[];for(var s=i.querySelectorAll("[data-stacking]"),a=s.length,h=0;a>h;h++)this.children[h]={el:s[h],stacking:s[h].getAttribute("data-stacking")};for(var u in e)e.hasOwnProperty(u)&&(this.opts[u]=e[u]);this.opts.damping=this.opts.damping||.1,this.resize(),o.addEventListener("resize",t(this.resize,500).bind(this));var l=0,m=0,c=0,d=0;this.animate=function(){l=n(l+(this.xRotation-l)*this.opts.damping),m=n(m+(this.yRotation-m)*this.opts.damping),c=n(c+(this.xTranslation-c)*this.opts.damping),d=n(d+(this.yTranslation-d)*this.opts.damping);for(var t=this.children.length,i=0,e;t>i;i++)e=this.children[i],this.setTransform(e.el,e.stacking,l,m,c,d);l&&m&&c&&d&&r(this.animate.bind(this))},this.el.addEventListener("touchmove",t(this.mousemove,50).bind(this)),this.el.addEventListener("mousemove",t(this.mousemove,50).bind(this)),this.el.addEventListener("mouseleave",t(this.mouseleave,300).bind(this)),this.el.addEventListener("touchleave",t(this.mouseleave,300).bind(this)),this.el.addEventListener("touchend",t(this.mouseleave,300).bind(this))}var o=window,a=document,h=a.documentElement,r=o.requestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame||o.msRequestAnimationFrame||o.oRequestAnimationFrame||function(t){o.setTimeout(t,20)},u=function(){var t={};return function(i){if(void 0!==t[i])return t[i];var e=a.createElement("div"),n=e.style,s=i.charAt(0).toUpperCase()+i.slice(1),o=["webkit","moz","ms","o"],h=(i+" "+o.join(s+" ")+s).split(" ");for(var r in h)if(h[r]in n)return t[i]=h[r];return t[i]=!1}}(),l=u("transform");return l?(window.ATVicon=function(t,i){for(var e="string"==typeof t?a.querySelectorAll(t):t instanceof Element?[t]:t,n=e.length,o=0,h=[];n>o;o++)h[o]=new s(e[o],i);return h},void(s.prototype={opts:{maxRotation:8,maxTranslation:4,perspective:800,damping:.1},resize:function(){var t=this.el.getBoundingClientRect();this.offset={top:t.top+o.pageYOffset-h.clientTop,left:t.left+o.pageXOffset-h.clientLeft},this.width=t.width,this.height=t.height},setTransform:function(t,i,e,n,s,o){i=i||1;var a="perspective("+this.opts.perspective+"px) rotateX("+e*this.opts.maxRotation+"deg) rotateY("+n*this.opts.maxRotation+"deg)",h=" translate3d("+s*this.opts.maxTranslation*i+"px,"+o*this.opts.maxTranslation*i+"px, 0px)";t.style[l]=a+h},mousemove:function(t){var n=t.touches?t.touches[0].clientX:t.clientX,s=t.touches?t.touches[0].clientY:t.clientY,o=n-this.offset.left,a=s-this.offset.top;t.touches&&t.preventDefault(),this.xRotation=i(a,this.height),this.yRotation=-1*i(o,this.width),this.xTranslation=e(o,this.width),this.yTranslation=e(a,this.height),this._animating||(this._animating=!0,r(this.animate.bind(this)))},mouseleave:function(){this._animating=!1,this.xRotation=this.yRotation=this.xTranslation=this.yTranslation=0,r(this.animate.bind(this))}})):(window.ATVicon=function(){return!1},!1)}();