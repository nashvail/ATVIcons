/*! ATVicon.js, v1.0.3 - Author: Nash Vail (nashvail.me) - https://github.com/nashvail/ATVIcons */
(function(){function n(a,b){var d=null;return function(){var e=this,c=arguments;null===d&&(d=setTimeout(function(){a.apply(e,c);d=null},b))}}function q(a,b){if(!(a&&a instanceof Element))return!1;this.el=a;this.children=[];for(var d=a.querySelectorAll("[data-stacking]"),e=d.length,c=0;c<e;c++)this.children[c]={el:d[c],stacking:d[c].getAttribute("data-stacking")};for(var g in b)b.hasOwnProperty(g)&&(this.opts[g]=b[g]);this.opts.damping=this.opts.damping||.1;this.resize();f.addEventListener("resize",
n(this.resize,500).bind(this));var h=0,k=0,l=0,m=0;this.setTransform=function(a,b){b=b||1;a.style[r]="perspective("+this.opts.perspective+"px) rotateX("+h*this.opts.maxRotation+"deg) rotateY("+k*this.opts.maxRotation+"deg)"+(" translate3d("+l*this.opts.maxTranslation*b+"px,"+m*this.opts.maxTranslation*b+"px, 0px)")};this.animate=function(){h=Math.ceil(1E4*(h+(this.xRotation-h)*this.opts.damping))/1E4;k=Math.ceil(1E4*(k+(this.yRotation-k)*this.opts.damping))/1E4;l=Math.ceil(1E4*(l+(this.xTranslation-
l)*this.opts.damping))/1E4;m=Math.ceil(1E4*(m+(this.yTranslation-m)*this.opts.damping))/1E4;for(var a=this.children.length,b=0,c;b<a;b++)c=this.children[b],this.setTransform(c.el,c.stacking);h&&k&&l&&m&&p(this.animate.bind(this))};this.el.addEventListener("mousemove",n(this.mousemove,50).bind(this));this.el.addEventListener("mouseleave",n(this.mouseleave,300).bind(this))}var f=window,g=document,t=g.documentElement,p=f.requestAnimationFrame||f.mozRequestAnimationFrame||f.webkitRequestAnimationFrame||
f.msRequestAnimationFrame||f.oRequestAnimationFrame||function(a){f.setTimeout(a,20)},r=function(){var a={};return function(b){if(void 0!==a[b])return a[b];var d=g.createElement("div").style,e=b.charAt(0).toUpperCase()+b.slice(1),e=(b+" "+["webkit","moz","ms","o"].join(e+" ")+e).split(" "),c;for(c in e)if(e[c]in d)return a[b]=e[c];return a[b]=!1}}()("transform");if(!r)return window.ATVicon=function(){return!1},!1;window.ATVicon=function(a,b){for(var d="string"===typeof a?g.querySelectorAll(a):a instanceof
Element?[a]:a,e=d.length,c=0;c<e;c++)d[c]=new q(d[c],b);return d};q.prototype={opts:{maxRotation:8,maxTranslation:4,perspective:800,damping:.1},xRotation:0,yRotation:0,xTranslation:0,yTranslation:0,resize:function(){var a=this.el.getBoundingClientRect();this.offset={top:a.top+f.pageYOffset-t.clientTop,left:a.left+f.pageXOffset-t.clientLeft};this.width=a.width;this.height=a.height},mousemove:function(a){var b=(a.touches?a.touches[0].clientX:a.clientX)-this.offset.left;a=(a.touches?a.touches[0].clientY:
a.clientY)-this.offset.top;this.xRotation=-2/this.height*a+1;this.yRotation=-1*(-2/this.width*b+1);this.xTranslation=-2/this.width*b+1;this.yTranslation=-2/this.height*a+1;this._animating||(this._animating=!0,p(this.animate.bind(this)))},mouseleave:function(){this._animating=!1;this.xRotation=this.yRotation=this.xTranslation=this.yTranslation=0;p(this.animate.bind(this))}}})();